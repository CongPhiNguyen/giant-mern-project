{"version":3,"file":"static/js/687.1cc7d1fe.chunk.js","mappings":"6PAQe,SAASA,IACtB,IAAMC,GAASC,EAAAA,EAAAA,MACf,GAA8BC,EAAAA,EAAAA,YAA9B,eAAOC,EAAP,KAAgBC,EAAhB,KACA,GAA8BF,EAAAA,EAAAA,UAAS,CAAC,GAAxC,eAAOG,EAAP,KAAgBC,EAAhB,KACA,GAA4CJ,EAAAA,EAAAA,WAAS,GAArD,eAAOK,EAAP,KAAuBC,EAAvB,KAuDA,OAtDAC,EAAAA,EAAAA,YAAU,YACa,WACnBC,IAAAA,SAAAA,iBAAiC,EACjC,IAAMC,EAAMC,EAAAA,EAAAA,WAAiB,gCAC7BF,IAAAA,IACOC,EAAK,CACRX,QAAO,UACFA,KAGNa,MAAK,SAACC,GACLC,QAAQC,IAAI,OAAQF,GAEhBA,EAAKA,KAAKT,SACZG,GAAkB,GAClBF,EAAWQ,EAAKA,KAAKT,UAChBG,GAAkB,EAC1B,IACAS,OAAM,SAACC,GACNV,GAAkB,GAClBO,QAAQC,IAAI,MAAOE,EACpB,GACJ,CACDC,EACD,GAAE,CAACnB,EAAOoB,OAAQpB,EAAOqB,SAE1BZ,EAAAA,EAAAA,YAAU,WAC4B,IAAhCa,OAAOC,KAAKlB,GAASmB,SACvBrB,GAAWA,EAAQsB,UACnBrB,EACEsB,IAAc,CACZC,GAAI,SACJC,UAAW,kDACXC,YAAa,CACXC,MAAO,CACLC,MAAO,8CACPC,IAAI,GAAD,OAAKpB,EAAAA,EAAAA,WAAL,uBAAkCZ,EAAOoB,OAAzC,YAAmDpB,EAAOqB,MAA1D,KACHY,OAAQ,OACRC,QAAS,IACTC,SAAU,MACVC,KAAM,CACJC,MAAM,GAAD,OAAKhC,EAAQiC,UAAUC,GAC5BC,OAAO,GAAD,OAAKnC,EAAQiC,UAAUG,MAInCC,uBAAwB,EACxBC,cAAe,EACfC,QAAS,KAIhB,GAAE,CAACvC,IACJU,QAAQC,IAAIhB,IAEV,yBACIO,GAGA,gBACEoB,GAAG,SACHkB,MAAO,CAAEC,MAAO,OAAQC,OAAQ,OAAQC,OAAQ,qBAJlD,0EAWP,C","sources":["album/pages/Image/ViewImage/ImageViewing.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport OpenSeadragon from \"openseadragon\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nimport \"./ImageViewing.scss\";\r\nimport API from \"../../../../config/API\";\r\n\r\nexport default function ImageViewing() {\r\n  const params = useParams();\r\n  const [viewer1, setViewer1] = useState();\r\n  const [imgInfo, setImgInfo] = useState({});\r\n  const [havePermission, setHavePermission] = useState(false);\r\n  useEffect(() => {\r\n    const getImageInfo = () => {\r\n      axios.defaults.withCredentials = true;\r\n      const url = API.PREFIX_URL + \"/api/image/get-concrete-image\";\r\n      axios\r\n        .get(url, {\r\n          params: {\r\n            ...params,\r\n          },\r\n        })\r\n        .then((data) => {\r\n          console.log(\"data\", data);\r\n\r\n          if (data.data.imgInfo) {\r\n            setHavePermission(true);\r\n            setImgInfo(data.data.imgInfo);\r\n          } else setHavePermission(false);\r\n        })\r\n        .catch((err) => {\r\n          setHavePermission(false);\r\n          console.log(\"err\", err);\r\n        });\r\n    };\r\n    getImageInfo();\r\n  }, [params.userID, params.imgID]);\r\n\r\n  useEffect(() => {\r\n    if (Object.keys(imgInfo).length !== 0) {\r\n      viewer1 && viewer1.destroy();\r\n      setViewer1(\r\n        OpenSeadragon({\r\n          id: \"slide1\",\r\n          prefixUrl: \"//openseadragon.github.io/openseadragon/images/\",\r\n          tileSources: {\r\n            Image: {\r\n              xmlns: \"https://schemas.microsoft.com/deepzoom/2008\",\r\n              Url: `${API.PREFIX_URL}/images/dzi/${params.userID}/${params.imgID}/`,\r\n              Format: \"jpeg\",\r\n              Overlap: \"0\",\r\n              TileSize: \"256\",\r\n              Size: {\r\n                Width: `${imgInfo.dimension.x}`,\r\n                Height: `${imgInfo.dimension.y}`,\r\n              },\r\n            },\r\n          },\r\n          smoothTileEdgesMinZoom: 1,\r\n          animationTime: 1,\r\n          opacity: 1,\r\n        })\r\n      );\r\n    }\r\n  }, [imgInfo]);\r\n  console.log(params);\r\n  return (\r\n    <div>\r\n      {!havePermission ? (\r\n        <p>You don't have permission to access this file</p>\r\n      ) : (\r\n        <div\r\n          id=\"slide1\"\r\n          style={{ width: \"100%\", height: \"80vh\", border: \"1px solid #333\" }}\r\n        ></div>\r\n      )}\r\n\r\n      {/* {noPermission ? <></>} */}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["ImageViewing","params","useParams","useState","viewer1","setViewer1","imgInfo","setImgInfo","havePermission","setHavePermission","useEffect","axios","url","API","then","data","console","log","catch","err","getImageInfo","userID","imgID","Object","keys","length","destroy","OpenSeadragon","id","prefixUrl","tileSources","Image","xmlns","Url","Format","Overlap","TileSize","Size","Width","dimension","x","Height","y","smoothTileEdgesMinZoom","animationTime","opacity","style","width","height","border"],"sourceRoot":""}